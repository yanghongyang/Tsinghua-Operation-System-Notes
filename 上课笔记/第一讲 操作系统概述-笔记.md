# 什么是操作系统

操作系统是一个控制程序

- 一个系统软件
- 控制程序执行过程，防止错误和计算机的不当使用
- 执行用户程序，给用户程序提供各种服务
- 方便用户使用计算机系统

操作系统是一个资源管理器

- 应用程序与硬件之间的中间层
- 管理各种计算机软硬件资源
- 提供访问计算机软硬件资源的高效手段
- 解决资源访问冲突，确保资源公平使用

## 操作系统的地位

应用程序（用户）

系统应用（应用开发者）

操作系统（应用开发者）

计算机硬件（系统设计者）

**操作系统在硬件（CPU、磁盘、内存）进行了一层隔离，对上层应用（进程、文件、地址空间）提供逻辑等资源。**

## 操作系统软件的组成

### Shell 命令行接口

1. 通过键盘操纵
2. 方便用户进行命令输入

### GUI 图形用户接口

1. WIMP(视窗(Window)、图标(Icon)、选单(Menu)、指针(Pointer))
2. 直接操作和所见即所得

### Kernel 操作系统的内部

1. 执行各种资源管理等功能

## 操作系统内核特征

1. 并发

   - 计算机系统中同时存在多个运行的程序，需要 OS 管理和调度。

2. 共享

   - “同时”访问
   - 互斥共享

3. 虚拟

   - 利用多道程序设计技术，让每个用户都觉得有一个计算机专门为他服务。

4. 异步
   - 程序的执行不是一贯到底，而是走走停停，向前推进的。
   - 只要运行环境相同，OS 需要保证程序运行的结果也要相同。

# 操作系统实例
## Unix家族
Unix BSD

## Linux家族
redhat、fedora、ubuntu、suse、debian...

扩展到了Android系统。

## Windows系统
- 封闭

# 操作系统演变
操作系统的主要功能：硬件抽象和协调管理。

原则：设计随着各种相关技术的改变而做出一定的改变。

在过去二十年底层技术有极大的改变。

- 单用户系统
- 批处理系统
- 多道程序系统
- 分时
- 个人计算机：每个用户一个系统
- 分布式计算：每个用户多个系统

## 单用户系统
操作系统=装载器+通用子程序库

## 批处理
顺序处理与批处理

## 多道程序
保持多个工作在内存中并且在各工作间复用CPU

## 分时系统
定时中断用于工作对CPU的复用

## 个人电脑操作系统
个人电脑系统
- 单用户
- 利用率已经不再是关注点
- 重点是用户界面和多媒体功能
- 很多老的服务和功能不存在

## 分布式操作系统
- 网络支持成为一个重要的功能

# 操作系统的结构
## 简单结构
1. MS-DOS 
   1. 在最小的空间，设计用于提供大部分功能（1981~1994）
   2. 没有拆分为模块
   3. 主要用汇编编写，接口和功能水平没有很好地分离

2. 分层结构
   1. 每层建立在低层之上
   2. 最底层（layer 0），是硬件
   3. 最高层（layer N），是用户界面
   4. 每一层仅使用更低一层的功能（操作）和服务

3. 微内核结构
   1. 尽可能把内核功能移到用户空间
   2. 用户模块间的通信使用消息传递
   3. 好处：灵活/安全
   4. 缺点：性能

4. 外核结构
   1. 让内核分配机器的物理资源给多个应用程序，并让每个程序决定如何处理这些资源
   2. 程序能链接到操作系统库（libOS）实现了操作系统抽象
   3. 保护与控制分离

VMM（虚拟管理器）
无虚拟机：单操作系统拥有所有硬件资源。

有虚拟机：多操作系统共享硬件资源。